import React,
{
    createContext,
    useState,
    useContext,
    ReactNode
} from 'react';

const translations = {
    en: {
        "welcome_title": "Welcome to Tai Po Rescue",
        "welcome_subtitle": "We connect neighbors to help each other during emergencies. Let's get you set up.",
        "welcome_resident_title": "Welcome.",
        "resident_points": "This app helps you quickly find nearby shelters and supply points. You can use the map and filter by the type of support you need (for example warm clothing, food, power banks, or pet support), and you can also browse curated useful links and other platforms.",
        "welcome_volunteer_title": "Thank you for stepping up to help.",
        "volunteer_points": "This app shows you, in real time, which locations need supplies or manpower, and you can filter by the types of items you have so you know exactly where theyâ€™re needed. You can also open the useful links area to quickly access Telegram groups and other platforms.",
        "welcome_driver_title": "Welcome Driver",
        "welcome_driver_subtitle": "Your vehicle can make a huge difference:",
        "driver_point_1": "Find Transport Tasks to move supplies.",
        "driver_point_2": "Accept tasks that fit your vehicle type and route.",
        "driver_points": "Find Transport Tasks to move supplies.\nAccept tasks that fit your vehicle type and route.",
        "welcome_station_manager_title": "Welcome Station Manager",
        "welcome_station_manager_subtitle": "You are key to your station's success:",
        "station_manager_point_1": "Manage your station's details, status, and inventory.",
        "station_manager_point_2": "Create tasks for your station team.",
        "station_manager_point_3": "Broadcast alerts to residents.",
        "station_manager_points": "Manage your station's details, status, and inventory.\nCreate tasks for your station team.\nBroadcast alerts to residents.",
        "welcome_admin_title": "Welcome Admin",
        "welcome_admin_subtitle": "System Overview:",
        "admin_point_1": "Manage all users, stations, and tasks.",
        "admin_point_2": "Review analytics and system health.",
        "admin_point_3": "Handle high-level configurations and alerts.",
        "admin_points": "Manage all users, stations, and tasks.\nReview analytics and system health.\nHandle high-level configurations and alerts.",
        "get_started": "Get Started",
        "next": "Next",
        "back": "Back",
        "what_brings_you_here": "What brings you here?",
        "i_need_help": "I need help",
        "find_supplies": "Find supplies, stations, and support nearby.",
        "or_i_want_to_help": "OR I WANT TO HELP",
        "i_want_to_volunteer": "I want to Volunteer",
        "join_teams": "Join teams, help at stations, and assist others.",
        "i_am_a_driver": "I am a Driver",
        "help_transport": "Help transport supplies between stations.",
        "back_to_role_selection": "Back to role selection",
        "add.title": "Add New Station",
        "add.name": "Station Name",
        "add.placeholder_name": "e.g., Tai Po Community Hall",
        "add.address": "Address",
        "add.placeholder_address": "Enter address or use map",
        "add.type": "Station Type",
        "add.contact": "Contact Number",
        "add.placeholder_contact": "Optional phone number",
        "add.contact_link": "Contact Link",
        "add.placeholder_contact_link": "Optional URL (e.g., Telegram, WhatsApp)",
        "add.source_url": "Source URL",
        "add.placeholder_source": "Link to the source of information",
        "btn.submit": "Submit Station",
        "btn.deselect_all": "Deselect All",
        "btn.select_all": "Select All",
        "btn.clear": "Clear",
        "btn.apply": "Apply",
        "btn.add_item": "Add a new item",
        "validation.enter_item": "Please enter an item name.",
        "validation.no_category": "Please select a category.",
        "validation.already_exists": "This item already exists.",
        "btn.add": "Add",
        "btn.add_category": "Add a new category",
        "validation.enter_category": "Please enter a category name.",
        "status.available": "âœ… Available",
        "status.low_stock": "âš ï¸ Low Stock",
        "status.urgent": "â€¼ï¸ Urgent",
        "status.no_data": "ðŸ¤¨ No Data",
        "status.gov_control": "ðŸ™…ðŸ» Gov has taken control",
        "status.paused": "æš«åœæŽ¥æ”¶ç‰©è³‡ï¼ˆç¾å ´æä¾›ï¼‰",
        "auth.login_required": "Please log in to perform this action.",
        "vote.success": "Vote submitted successfully.",
        "vote.error": "Failed to submit vote.",
        "favorite.added": "Added to favorites.",
        "favorite.removed": "Removed from favorites.",
        "res.my_location": "My Location",
        "status.unverified": "Unverified",
        "card.offerings": "Offerings",
        "card.no_info": "No information",
        "res.view_details": "View Details",
        "res.search_placeholder": "Search stations or items",
        "type.all": "All",
        "res.more_filters": "More Filters",
        "btn.filter_items": "Filter by Item",
        "sort.status": "Sort by Status",
        "sort.distance": "Sort by Distance",
        "btn.reset": "Reset",
        "res.filter_pets": "Pet-Friendly",
        "res.filter_baby": "Baby Care",
        "res.filter_wheelchair": "Wheelchair Accessible",
        "res.filter_charging": "Charging Available",
        "btn.traffic": "Toggle Traffic",
        "res.no_stations_map": "No stations match your filters.",
        "common.loading": "Loading...",
        "res.no_stations_list": "No stations found.",
        "res.filter_title": "Filter by Item",
        "nav.resident": "Resident",
        "nav.links": "Links",
        "nav.me": "Me",
        "nav.my_stations": "My Stations",
        "nav.volunteer": "Volunteer",
        "nav.logistics": "Logistics",
        "me.title": "My Profile",
        "role.volunteer": "Volunteer",
        "role.resident": "Resident",
        "me.switch_role": "Switch Role",
        "station.managed_station_id": "Managed Station ID",
        "btn.signout": "Sign Out",
        "me.login_desc": "Log in to save favorites and contribute.",
        "btn.signin": "Sign In with Google",
        "btn.continue_without_login": "Continue without login",
        "onboarding.logged_in_features.title": "Extra features if you sign in",
        "onboarding.logged_in_features.desc": "Sign in to save favorites and like / dislike stations ",
        "onboarding.location_title": "Enable location to find nearby help",
        "onboarding.location_desc": "We use your location to show nearby stations and route directions. You can enable location now or choose to allow it later.",
        "onboarding.location_allow": "Allow Location",
        "onboarding.location_maybe_later": "Maybe later",
        "btn.skip": "Skip",
        "admin.global_alert_broadcast": "Global Alert Broadcast",
        "admin.alert_placeholder": "Enter a global alert message",
        "admin.publish_alert": "Publish Alert",
        "me.my_stations": "My Stations",
        "me.saved_stations": "Saved Stations",
        "me.no_saved": "You haven't saved any stations yet.",
        "btn.directions": "Directions",
        "btn.call": "Call",
        "station.needs_label": "Needs",
        "station.remarks_label": "Remarks",
        "station.offerings_label": "Offerings",
        "station.login_to_view": "Please log in to view your stations.",
        "station.edit_station": "Edit Station",
        "btn.save": "Save",
        "station.name": "Station Name",
        "station.address_location": "Address & Location",
        "station.use_current_location": "Use Current Location",
        "station.hide_map": "Hide Map",
        "station.pick_on_map": "Pick on Map",
        "station.map_helper_text": "Drag marker or click to set location",
        "station.status": "Status",
        "station.add_needs": "Add Needs",
        "btn.save_changes": "Save Changes",
        "btn.cancel": "Cancel",
        "station.manage_desc": "Manage your station's details, status, and inventory.",
        "btn.edit": "Edit",
        "station.no_owned_stations": "You do not own or manage any stations.",
        "station.create_station_prompt": "Create a new station to get started.",
        "links.tg_title": "Telegram Groups",
        "links.web_title": "Websites",
        "type.supply": "Supply",
        "type.shelter": "Shelter",
        "type.closed": "Closed",
        "type.pet_shelter": "Pet Shelter",
        "type.food_distribution": "Food",
        "type.medical": "Medical",
        "type.collection_point": "Collection",
        "crowd.low": "Low",
        "crowd.medium": "Medium",
        "crowd.high": "High",
        "crowd.full": "Full",
        "FOOD": "Food",
        "DRINKS": "Drinks",
        "MEDICAL_SUPPLIES": "Medical Supplies",
        "HYGIENE": "Hygiene",
        "CLOTHING": "Clothing",
        "BABY_CARE": "Baby Care",
        "PET_SUPPLIES": "Pet Supplies",
        "ELECTRONICS": "Electronics",
        "SHELTER": "Shelter",
        "SERVICES": "Services",
        "favorite.update_failed": "Failed to update favorite",
        "volunteer.data_load_error": "Failed to load volunteer data",
        "volunteer.unknown_station": "Unknown Station",
        "volunteer.task_claimed": "Task claimed!",
        "volunteer.claim_failed": "Failed to claim task",
        "volunteer.confirm_completion": "Confirm delivery completion?",
        "volunteer.task_completed": "Task completed!",
        "volunteer.complete_failed": "Failed to complete task",
        "volunteer.tasks": "Tasks",
        "volunteer.stations": "Stations",
        "volunteer.help_community": "Help your community",
        "volunteer.open_tasks": "Open Tasks",
        "volunteer.my_tasks": "My Tasks",
        "volunteer.my_active_tasks": "Your Active Tasks",
        "volunteer.in_progress": "IN PROGRESS",
        "volunteer.complete": "Complete",
        "volunteer.available_tasks": "Available Tasks",
        "volunteer.no_tasks": "No tasks currently available.",
        "volunteer.posted": "Posted",
        "volunteer.from": "From",
        "volunteer.to": "To",
        "volunteer.volunteer_for_task": "Volunteer for this Task",
        
        // Categories
        "cat.manpower": "Manpower",
        "cat.warmth": "Warmth",
        "cat.food_water": "Food & Water",
        "cat.hygiene_wash": "Hygiene & Wash",
        "cat.electronics": "Electronics",
        "cat.bedding": "Bedding",
        "cat.sanitary": "Sanitary",
        "cat.pets": "Pet Supplies",
        "cat.baby": "Baby Supplies",
        "cat.others": "Others",
        "me.switch_guest_resident": "Switch to Resident (guest)",
        "me.switch_guest_volunteer": "Switch to Volunteer (guest)",
        "confirm.guest_switch_resident": "Switching to Resident mode will change the app view for guests. Continue?",
        "confirm.guest_switch_volunteer": "Switching to Volunteer mode will change the app view for guests. Continue?",

        // Items
        "ä¸€èˆ¬ç¾©å·¥": "General Volunteers",
        "é†«è­·äººå“¡": "Medic",
        "ç¤¾å·¥": "Social Worker",
        "è»Šæ‰‹": "Driver",
        "å¿ƒç†è¼”å°Žå“¡": "Psychological Counselor",
        "ä¿æš–å…§è¡£": "Thermal Underwear",
        "æ±‚æ¯›æ°ˆ": "Blanket",
        "åå…‰éŒ«ç´™": "Reflective Foil",
        "ç†±æ°´": "Hot Water",
        "æ°´": "Water",
        "éºµåŒ…": "Bread",
        "èƒ½é‡å•«å–±": "Energy Gel",
        "å¤§æ¯›å·¾": "Large Towel",
        "æ´—é ­æ°´": "Shampoo",
        "æ²æµ´éœ²": "Body Wash",
        "åžƒåœ¾è¢‹": "Trash Bag",
        "æ‘ºå‡³": "Folding Stool",
        "ç•ªæ¢˜": "Soap",
        "å°¿è¢‹": "Power Bank",
        "ç…§æ˜Žç”¨å“": "Lighting",
        "å·®é›»ç·š": "Charging Cable",
        "åºŠå¢Š": "Mattress",
        "æž•é ­": "Pillow",
        "è¢«": "Quilt",
        "çœ¼ç½©": "Eye Mask",
        "è€³å¡ž": "Earplugs",
        "75%æ”¯è£é…’ç²¾": "75% Alcohol",
        "æ¿•ç´™å·¾": "Wet Wipes",
        "å¥³æ€§ç”¨å“": "Feminine Hygiene",
        "è²“ç‹—ç½é ­": "Pet Canned Food",
        "è²“ç‹—ä¹¾ç³§": "Pet Dry Food",
        "å¯µç‰©è¡£æœ": "Pet Clothes",
        "è—¥å“": "Medicine",
        "å¥¶æ¨½": "Baby Bottle",
        "å¥¶ç²‰": "Milk Powder",
        "å°¿ç‰‡": "Diapers",
        "æ–‡å…·": "Stationery",
        "ç´…ç™½è—è† è¢‹": "RB Bag",
        "å¤§è²å…¬": "Megaphone",
        
        // Old items kept for compatibility
        "ä½å®¿": "Accommodation",
        "æš«ä½": "Temporary Shelter",
        "å®¿ä½": "Beds",
        "åº‡è­·ä¸­å¿ƒ": "Shelter Center",
        "ä¼‘æ¯è™•": "Rest Area",
        "æ´—æ¾¡è¨­æ–½": "Shower Facilities",
        "æ´—æ‰‹é–“": "Toilets",
        "æ°´æ©Ÿ": "Water Dispenser",
        "å»šæˆ¿": "Kitchen",
        "é£Ÿç‰©": "Food",
        "é£²å“": "Drinks",
        "æ¨½è£æ°´": "Bottled Water",
        "ä¹¾ç³§": "Dry Food",
        "æ¯éºµ": "Cup Noodles",
        "ç†±é£Ÿ": "Hot Food",
        "èƒ½é‡æ£’": "Energy Bar",
        "æ¹¯æ°´": "Soup",
        "ç½é ­": "Canned Food",
        "é¤å…·": "Cutlery",
        "é£¯ç›’": "Lunch Box",
        "ç´™æ¯": "Paper Cup",
        "ä¿æš–ç‰©è³‡": "Warmth Supplies",
        "æ¯›å·¾": "Towel",
        "æ¯›æ°ˆ": "Blanket",
        "è¢«é‹ª": "Bedding",
        "è¤¸": "Coat",
        "è¥ª": "Socks",
        "æš–åŒ…": "Heat Pack",
        "ç¡è¢‹": "Sleeping Bag",
        "åœ°å¢Š": "Mat",
        "éœ²ç‡Ÿå¸³ç¯·": "Tent",
        "Heat tech": "Heat Tech",
        "ç‰™åˆ·": "Toothbrush",
        "ç‰™è†": "Toothpaste",
        "å£ç½©": "Mask",
        "è±¬å’€": "Gas Mask",
        "æ¿¾ç½": "Filter",
        "BBå°¿ç‰‡": "Baby Diapers",
        "æˆäººå°¿ç‰‡": "Adult Diapers",
        "æ¸…æ½”ç”¨å“": "Cleaning Supplies",
        "ç´™å·¾": "Tissue",
        "ä¸€æ¬¡æ€§å…§è¡£è¤²": "Disposable Underwear",
        "æ‹–éž‹": "Slippers",
        "å…§è¡£è¤²": "Underwear",
        "è¡›ç”Ÿç”¨å“": "Sanitary Supplies",
        "N95": "N95 Mask",
        "å‰é›»ç·š": "Charging Cable",
        "ç«ç‰›": "Adapter",
        "æ‹–æ¿": "Power Strip",
        "é›»æ± ": "Battery",
        "é›»ç­’": "Flashlight",
        "SIM Card": "SIM Card",
        "æ€¥æ•‘": "First Aid",
        "æ€¥æ•‘åŒ…": "First Aid Kit",
        "è¼ªæ¤…": "Wheelchair",
        "å¯µç‰©æ°§æ°£æ©Ÿ": "Pet Oxygen Machine",
        "å¯µç‰©é£›æ©Ÿç± ": "Pet Crate",
        "å¯µç‰©æš«æ‰˜å®¶åº­": "Pet Foster Home",
        "è²“ç³§": "Cat Food",
        "ç‹—ç³§": "Dog Food",
        "ç¸é†«æœå‹™": "Vet Service",
        "å¯µç‰©æ•‘æ´": "Pet Rescue",
        "çœ‹é¡§é•·è€…": "Elderly Care",
        "å…’ç«¥æš«è¨—": "Child Care",
        "å¿ƒç†æ”¯æ´": "Psychological Support"
    },
    zh: {
        "welcome_title": "å¤§åŸ”æ•‘æ€¥",
        "welcome_subtitle": "ä¸€å€‹é‡å°ç‚ºå—å¤§åŸ”å®ç¦è‹‘ç«ç½å½±éŸ¿å˜…è¡—åŠåŒæ•‘æ´ç¾©å·¥è€Œè¨­å˜…å³æ™‚è³‡è¨Šæ•´åˆå¹³å°ï¼Œç¢ºä¿æ¯åˆ†æ°‘é–“åŠ›é‡éƒ½ç”¨å¾—å…¶æ‰€",
        "welcome_resident_title": "ä½ å¥½",
        "resident_points": "ä½ å¯ä»¥ç”¨å‘¢å€‹appåŽ»æµæœ€è¿‘å˜…ç‰©è³‡ç«™åŒåº‡è­·ä¸­å¿ƒï¼Œäº¦å¯ä»¥filterè‡ªå·±éœ€è¦å˜…è³‡æºé¡žåž‹ï¼ˆä¾‹å¦‚ä¿æš–ç‰©è³‡ã€é£Ÿç‰©ã€å°¿è¢‹ã€å¯µç‰©æ”¯æ´ï¼‰ã€‚\nä½ äº¦éƒ½å¯ä»¥ç‡åˆ°æ•´ç†å¥½å˜…linksåŒæ±‚åŠ©è³‡è¨Šã€‚",
        "welcome_volunteer_title": "ä½ å¥½",
        "volunteer_points": "å¤šè¬ä½ å‡ºä¸€åˆ†åŠ›ã€‚ä½ å¯ä»¥ç”¨å‘¢å€‹appå¯¦æ™‚ç‡åˆ°å„å€‹ç‰©è³‡ç«™éœ€è¦å’©ç‰©è³‡æˆ–è€…äººæ‰‹ï¼Œå†ç”¨filterè¿”ä½ æ‰‹ä¸Šæœ‰å˜…ç‰©è³‡ã€‚\nä½ äº¦éƒ½å¯ä»¥æµåˆ°æ•´ç†å¥½å˜…å…¶ä»–å¹³å°linksåŒå„å€‹TGç¾¤çµ„ã€‚",
        "welcome_driver_title": "æ­¡è¿Ž",
        "welcome_driver_subtitle": "æ‚¨çš„è»Šè¼›å¯ä»¥ç™¼æ®å·¨å¤§ä½œç”¨ï¼š",
        "driver_point_1": "å°‹æ‰¾é‹è¼¸ä»»å‹™ä»¥é‹é€ç‰©è³‡ã€‚",
        "driver_point_2": "æŽ¥å—é©åˆæ‚¨è»Šåž‹å’Œè·¯ç·šçš„ä»»å‹™ã€‚",
        "driver_points": "å°‹æ‰¾é‹è¼¸ä»»å‹™ä»¥é‹é€ç‰©è³‡ã€‚\næŽ¥å—é©åˆæ‚¨è»Šåž‹å’Œè·¯ç·šçš„ä»»å‹™ã€‚",
        "welcome_station_manager_title": "æ­¡è¿Žç«™é•·",
        "welcome_station_manager_subtitle": "æ‚¨æ˜¯æ‚¨ç‰©è³‡ç«™æˆåŠŸçš„é—œéµï¼š",
        "station_manager_point_1": "ç®¡ç†æ‚¨ç‰©è³‡ç«™çš„è©³ç´°è³‡è¨Šã€ç‹€æ…‹å’Œåº«å­˜ã€‚",
        "station_manager_point_2": "ç‚ºæ‚¨çš„ç‰©è³‡ç«™åœ˜éšŠå‰µå»ºä»»å‹™ã€‚",
        "station_manager_point_3": "å‘å±…æ°‘å»£æ’­è­¦å ±ã€‚",
        "station_manager_points": "ç®¡ç†æ‚¨ç‰©è³‡ç«™çš„è©³ç´°è³‡è¨Šã€ç‹€æ…‹å’Œåº«å­˜ã€‚\nç‚ºæ‚¨çš„ç‰©è³‡ç«™åœ˜éšŠå‰µå»ºä»»å‹™ã€‚\nå‘å±…æ°‘å»£æ’­è­¦å ±ã€‚",
        "welcome_admin_title": "æ­¡è¿Ž",
        "welcome_admin_subtitle": "ç³»çµ±æ¦‚è¦½ï¼š",
        "admin_point_1": "ç®¡ç†æ‰€æœ‰ä½¿ç”¨è€…ã€ç‰©è³‡ç«™å’Œä»»å‹™ã€‚",
        "admin_point_2": "æŸ¥çœ‹åˆ†æžå’Œç³»çµ±å¥åº·ç‹€æ³ã€‚",
        "admin_point_3": "è™•ç†é«˜å±¤ç´šé…ç½®å’Œè­¦å ±ã€‚",
        "admin_points": "ç®¡ç†æ‰€æœ‰ä½¿ç”¨è€…ã€ç‰©è³‡ç«™å’Œä»»å‹™ã€‚\næŸ¥çœ‹åˆ†æžå’Œç³»çµ±å¥åº·ç‹€æ³ã€‚\nè™•ç†é«˜å±¤ç´šé…ç½®å’Œè­¦å ±ã€‚",
        "get_started": "é–‹å§‹",
        "next": "ä¸‹ä¸€æ­¥",
        "back": "è¿”å›ž",
        "what_brings_you_here": "æ‚¨åšŸå‘¢åº¦æƒ³åšå’©ï¼Ÿ",
        "i_need_help": "æˆ‘è¦æµç‰©è³‡",
        "find_supplies": "æµé™„è¿‘å˜…ç‰©è³‡ç«™åŒæ”¯æ´ã€‚",
        "or_i_want_to_help": "æˆ–è€…æˆ‘æƒ³å¹«æ‰‹",
        "i_want_to_volunteer": "æˆ‘æƒ³å¹«æ‰‹",
        "join_teams": "æ”¯æ´å¤§åŸ”å®ç¦è‹‘ç«ç½å½±éŸ¿å˜…è¡—åŠ",
        "i_am_a_driver": "æˆ‘ä¿‚è»Šæ‰‹",
        "help_transport": "å¹«åŠ©åœ¨ç‰©è³‡ç«™ä¹‹é–“é‹è¼¸ç‰©è³‡ã€‚",
        "back_to_role_selection": "è¿”å›ž",
        "add.title": "æ–°å¢žç‰©è³‡ç«™",
        "add.name": "ç‰©è³‡ç«™åç¨±",
        "add.placeholder_name": "ä¾‹å¦‚ï¼šå¤§åŸ”ç¤¾å€æœƒå ‚",
        "add.address": "åœ°å€",
        "add.placeholder_address": "è¼¸å…¥åœ°å€æˆ–ä½¿ç”¨åœ°åœ–",
        "add.type": "ç‰©è³‡ç«™é¡žåž‹",
        "add.contact": "è¯çµ¡é›»è©±",
        "add.placeholder_contact": "å¯é¸é›»è©±è™Ÿç¢¼",
        "add.contact_link": "è¯çµ¡é€£çµ",
        "add.placeholder_contact_link": "å¯é¸ URLï¼ˆä¾‹å¦‚ï¼šTelegramã€WhatsAppï¼‰",
        "add.source_url": "è³‡è¨Šä¾†æº URL",
        "add.placeholder_source": "è³‡è¨Šä¾†æºé€£çµ",
        "btn.submit": "æäº¤ç‰©è³‡ç«™",
        "btn.deselect_all": "å…¨éƒ¨å–æ¶ˆ",
        "btn.select_all": "å…¨é¸",
        "btn.clear": "æ¸…é™¤",
        "btn.apply": "å¥—ç”¨",
        "btn.add_item": "æ–°å¢žä¸€å€‹æ–°é …ç›®",
        "validation.enter_item": "è«‹è¼¸å…¥é …ç›®åç¨±ã€‚",
        "validation.no_category": "è«‹é¸æ“‡ä¸€å€‹é¡žåˆ¥ã€‚",
        "validation.already_exists": "æ­¤é …ç›®å·²å­˜åœ¨ã€‚",
        "btn.add": "æ–°å¢ž",
        "btn.add_category": "æ–°å¢žä¸€å€‹æ–°é¡žåˆ¥",
        "validation.enter_category": "è«‹è¼¸å…¥é¡žåˆ¥åç¨±ã€‚",
        "status.available": "âœ… å……è¶³",
        "status.low_stock": "âš ï¸ å°šéœ€",
        "status.urgent": "â€¼ï¸ æ€¥éœ€",
        "status.no_data": "ðŸ¤¨ ç„¡è³‡æ–™",
        "status.gov_control": "ðŸ™…ðŸ» æ”¿åºœå·²æŽ¥æ‰‹ ä¸éœ€ç¾©å·¥ç‰©è³‡",
        "status.paused": "æš«åœæŽ¥æ”¶ç‰©è³‡ï¼ˆç¾å ´æä¾›ï¼‰",
        "auth.login_required": "è«‹ç™»å…¥ä»¥åŸ·è¡Œæ­¤æ“ä½œã€‚",
        "vote.success": "æŠ•ç¥¨å·²æˆåŠŸæäº¤ã€‚",
        "vote.error": "æäº¤æŠ•ç¥¨å¤±æ•—ã€‚",
        "favorite.added": "å·²æ–°å¢žè‡³æˆ‘çš„æœ€æ„›ã€‚",
        "favorite.removed": "å·²å¾žæˆ‘çš„æœ€æ„›ä¸­ç§»é™¤ã€‚",
        "res.my_location": "æˆ‘çš„ä½ç½®",
        "status.unverified": "æœªé©—è­‰",
        "card.offerings": "æä¾›",
        "card.no_info": "æ²’æœ‰è³‡è¨Š",
        "res.view_details": "æŸ¥çœ‹è©³æƒ…",
        "res.search_placeholder": "æœå°‹ç‰©è³‡ç«™æˆ–ç‰©å“",
        "type.all": "å…¨éƒ¨",
        "res.more_filters": "æ›´å¤šç¯©é¸",
        "btn.filter_items": "æŒ‰ç‰©è³‡ç¯©é¸",
        "sort.status": "æŒ‰ç‹€æ…‹æŽ’åº",
        "sort.distance": "æŒ‰è·é›¢æŽ’åº",
        "btn.reset": "é‡è¨­",
        "btn.traffic": "åˆ‡æ›äº¤é€šç‹€æ³",
        "res.no_stations_map": "æ²’æœ‰ç¬¦åˆæ‚¨ç¯©é¸æ¢ä»¶çš„ç‰©è³‡ç«™",
        "common.loading": "è¼‰å…¥ä¸­...",
        "res.no_stations_list": "æ‰¾ä¸åˆ°ç‰©è³‡ç«™",
        "res.filter_title": "æŒ‰ç‰©è³‡ç¯©é¸",
        "nav.resident": "ç‰©è³‡ç«™",
        "nav.links": "é€£çµ",
        "nav.me": "æˆ‘çš„",
        "nav.my_stations": "æˆ‘çš„ç‰©è³‡ç«™",
        "nav.volunteer": "å¹«æ‰‹",
        "nav.logistics": "ç‰©æµ",
        "me.title": "æˆ‘çš„å€‹äººè³‡æ–™",
        "role.volunteer": "ç¾©å·¥",
        "role.resident": "å±…æ°‘",
        "me.switch_role": "åˆ‡æ›æ¨¡å¼",
        "me.switch_guest_resident": "åˆ‡æ›åˆ°å±…æ°‘ï¼ˆè¨ªå®¢ï¼‰",
        "me.switch_guest_volunteer": "åˆ‡æ›åˆ°ç¾©å·¥ï¼ˆè¨ªå®¢ï¼‰",
        "confirm.guest_switch_resident": "åˆ‡æ›åˆ°å±…æ°‘æ¨¡å¼æœƒæ›´æ”¹è¨ªå®¢ç•«é¢ï¼Œç¹¼çºŒï¼Ÿ",
        "confirm.guest_switch_volunteer": "åˆ‡æ›åˆ°ç¾©å·¥æ¨¡å¼æœƒæ›´æ”¹è¨ªå®¢ç•«é¢ï¼Œç¹¼çºŒï¼Ÿ",
        "station.managed_station_id": "ç®¡ç†çš„ç‰©è³‡ç«™ ID",
        "btn.signout": "ç™»å‡º",
        "me.login_desc": "ç™»å…¥ä»¥å„²å­˜æˆ‘çš„æœ€æ„›å’Œè²¢ç»ã€‚",
        "btn.signin": "ä½¿ç”¨ Google ç™»å…¥",
        "btn.continue_without_login": "ä»¥è¨ªå®¢èº«ä»½ç¹¼çºŒ",
        "btn.skip": "è·³éŽ",
        "onboarding.logged_in_features.title": "ç™»å…¥å¾Œå¯ä»¥ï¼š",
        "onboarding.logged_in_features.desc": "æ”¶è—åŒåŸ‹ðŸ‘/ðŸ‘Žè©•åƒ¹ç‰©è³‡ç«™",
        "onboarding.location_title": "é–‹å•Ÿå®šä½ä»¥å°‹æ‰¾é™„è¿‘ç‰©è³‡ç«™",
        "onboarding.location_desc": "æˆ‘å“‹æœƒç”¨ä½ å˜…ä½ç½®å¹«ä½ é¡¯ç¤ºé™„è¿‘æœ‰å’©ç‰©è³‡ç«™ã€‚\nä½ å¯ä»¥è€Œå®¶å…è¨±å®šä½ï¼Œæˆ–è€…ä¹‹å¾Œå†å–ºè¨­å®šå…¥é¢é–‹å•Ÿã€‚",
        "onboarding.location_allow": "å…è¨±å®šä½",
        "onboarding.location_maybe_later": "é²å•²å…ˆç®—",
        "admin.global_alert_broadcast": "å…¨åŸŸè­¦å ±å»£æ’­",
        "admin.alert_placeholder": "è¼¸å…¥å…¨åŸŸè­¦å ±è¨Šæ¯",
        "admin.publish_alert": "ç™¼ä½ˆè­¦å ±",
        "me.my_stations": "æˆ‘çš„ç«™é»ž",
        "me.saved_stations": "å·²å„²å­˜çš„ç«™é»ž",
        "me.no_saved": "æ‚¨å°šæœªå„²å­˜ä»»ä½•ç«™é»žã€‚",
        "btn.directions": "è·¯ç·š",
        "station.needs_label": "éœ€æ±‚",
        "station.remarks_label": "å‚™è¨»",
        "station.offerings_label": "æä¾›",
        "station.login_to_view": "è«‹ç™»å…¥ä»¥æŸ¥çœ‹æ‚¨çš„ç‰©è³‡ç«™ã€‚",
        "station.edit_station": "ç·¨è¼¯ç‰©è³‡ç«™",
        "btn.call": "è‡´é›»",
        "btn.save": "å„²å­˜",
        "station.name": "ç‰©è³‡ç«™åç¨±",
        "station.address_location": "åœ°å€å’Œä½ç½®",
        "station.use_current_location": "ä½¿ç”¨ç›®å‰ä½ç½®",
        "station.hide_map": "éš±è—åœ°åœ–",
        "station.pick_on_map": "åœ¨åœ°åœ–ä¸Šé¸æ“‡",
        "station.map_helper_text": "æ‹–æ›³æ¨™è¨˜æˆ–é»žæ“Šä»¥è¨­å®šä½ç½®",
        "station.status": "ç‹€æ…‹",
        "station.add_needs": "æ–°å¢žéœ€æ±‚",
        "btn.save_changes": "å„²å­˜è®Šæ›´",
        "btn.cancel": "å–æ¶ˆ",
        "station.manage_desc": "ç®¡ç†æ‚¨ç‰©è³‡ç«™çš„è©³ç´°è³‡è¨Šã€ç‹€æ…‹å’Œåº«å­˜ã€‚",
        "btn.edit": "ç·¨è¼¯",
        "station.no_owned_stations": "æ‚¨æ²’æœ‰æ“æœ‰æˆ–ç®¡ç†ä»»ä½•ç‰©è³‡ç«™ã€‚",
        "station.create_station_prompt": "å»ºç«‹ä¸€å€‹æ–°ç‰©è³‡ç«™ä»¥é–‹å§‹ã€‚",
        "links.tg_title": "Telegram ç¾¤çµ„",
        "links.web_title": "ç¶²ç«™",
        "type.supply": "ç‰©è³‡",
        "type.shelter": "ä½å®¿/åº‡è­·",
        "type.closed": "å·²æ¸…å ´",
        "type.pet_shelter": "å¯µç‰©åº‡è­·æ‰€",
        "type.food_distribution": "é£Ÿç‰©",
        "type.medical": "é†«ç™‚",
        "type.collection_point": "æ”¶é›†é»ž",
        "crowd.low": "ä½Ž",
        "crowd.medium": "ä¸­",
        "crowd.high": "é«˜",
        "crowd.full": "æ»¿",
        "FOOD": "é£Ÿç‰©",
        "DRINKS": "é£²å“",
        "MEDICAL_SUPPLIES": "é†«ç™‚ç”¨å“",
        "HYGIENE": "è¡›ç”Ÿç”¨å“",
        "CLOTHING": "è¡£ç‰©",
        "BABY_CARE": "å¬°å…’ç”¨å“",
        "PET_SUPPLIES": "å¯µç‰©ç”¨å“",
        "ELECTRONICS": "é›»å­ç”¢å“",
        "SHELTER": "åº‡è­·æ‰€",
        "SERVICES": "æœå‹™",
        "favorite.update_failed": "æ›´æ–°æˆ‘çš„æœ€æ„›å¤±æ•—",
        "volunteer.data_load_error": "è¼‰å…¥å¿—é¡˜è€…è³‡æ–™å¤±æ•—",
        "volunteer.unknown_station": "æœªçŸ¥ç‰©è³‡ç«™",
        "volunteer.task_claimed": "å·²é ˜å–ä»»å‹™ï¼",
        "volunteer.claim_failed": "é ˜å–ä»»å‹™å¤±æ•—",
        "volunteer.confirm_completion": "ç¢ºèªå®Œæˆé‹é€ï¼Ÿ",
        "volunteer.task_completed": "ä»»å‹™å·²å®Œæˆï¼",
        "volunteer.complete_failed": "å®Œæˆä»»å‹™å¤±æ•—",
        "volunteer.tasks": "ä»»å‹™",
        "volunteer.stations": "ç‰©è³‡ç«™",
        "volunteer.help_community": "å¹«åŠ©æ‚¨çš„ç¤¾å€",
        "volunteer.open_tasks": "é–‹æ”¾ä»»å‹™",
        "volunteer.my_tasks": "æˆ‘çš„ä»»å‹™",
        "volunteer.my_active_tasks": "æ‚¨ç›®å‰çš„ä»»å‹™",
        "volunteer.in_progress": "é€²è¡Œä¸­",
        "volunteer.complete": "å®Œæˆ",
        "volunteer.available_tasks": "å¯é ˜å–çš„ä»»å‹™",
        "volunteer.no_tasks": "ç›®å‰æ²’æœ‰å¯é ˜å–çš„ä»»å‹™ã€‚",
        "volunteer.posted": "ç™¼ä½ˆæ–¼",
        "volunteer.from": "å¾ž",
        "volunteer.to": "åˆ°",
        "volunteer.volunteer_for_task": "ç‚ºæ­¤ä»»å‹™æ“”ä»»å¿—é¡˜è€…",

        // Categories
        "cat.manpower": "äººæ‰‹",
        "cat.warmth": "ä¿æš–ç”¨å“",
        "cat.food_water": "ç³§é£Ÿ&æ°´",
        "cat.hygiene_wash": "æ¢³æ´—ç”¨å“",
        "cat.electronics": "é›»å™¨",
        "cat.bedding": "å¯¢å®¤ç”¨å“",
        "cat.sanitary": "è¡›ç”Ÿç”¨å“",
        "cat.pets": "å¯µç‰©ç”¨å“",
        "cat.baby": "BBç”¨å“",
        "cat.others": "å…¶ä»–",

        // Items
        "ä¸€èˆ¬ç¾©å·¥": "ä¸€èˆ¬ç¾©å·¥",
        "é†«è­·äººå“¡": "é†«è­·äººå“¡",
        "ç¤¾å·¥": "ç¤¾å·¥",
        "è»Šæ‰‹": "è»Šæ‰‹",
        "å¿ƒç†è¼”å°Žå“¡": "å¿ƒç†è¼”å°Žå“¡",
        "ä¿æš–å…§è¡£": "ä¿æš–å…§è¡£",
        "æ±‚æ¯›æ°ˆ": "æ±‚æ¯›æ°ˆ",
        "åå…‰éŒ«ç´™": "åå…‰éŒ«ç´™",
        "ç†±æ°´": "ç†±æ°´",
        "æ°´": "æ°´",
        "éºµåŒ…": "éºµåŒ…",
        "èƒ½é‡å•«å–±": "èƒ½é‡å•«å–±",
        "å¤§æ¯›å·¾": "å¤§æ¯›å·¾",
        "æ´—é ­æ°´": "æ´—é ­æ°´",
        "æ²æµ´éœ²": "æ²æµ´éœ²",
        "åžƒåœ¾è¢‹": "åžƒåœ¾è¢‹",
        "æ‘ºå‡³": "æ‘ºå‡³",
        "ç•ªæ¢˜": "ç•ªæ¢˜",
        "å°¿è¢‹": "å°¿è¢‹",
        "ç…§æ˜Žç”¨å“": "ç…§æ˜Žç”¨å“",
        "å·®é›»ç·š": "å·®é›»ç·š",
        "åºŠå¢Š": "åºŠå¢Š",
        "æž•é ­": "æž•é ­",
        "è¢«": "è¢«",
        "çœ¼ç½©": "çœ¼ç½©",
        "è€³å¡ž": "è€³å¡ž",
        "75%æ”¯è£é…’ç²¾": "75%æ”¯è£é…’ç²¾",
        "æ¿•ç´™å·¾": "æ¿•ç´™å·¾",
        "å¥³æ€§ç”¨å“": "å¥³æ€§ç”¨å“",
        "è²“ç‹—ç½é ­": "è²“ç‹—ç½é ­",
        "è²“ç‹—ä¹¾ç³§": "è²“ç‹—ä¹¾ç³§",
        "å¯µç‰©è¡£æœ": "å¯µç‰©è¡£æœ",
        "è—¥å“": "è—¥å“",
        "å¥¶æ¨½": "å¥¶æ¨½",
        "å¥¶ç²‰": "å¥¶ç²‰",
        "å°¿ç‰‡": "å°¿ç‰‡",
        "æ–‡å…·": "æ–‡å…·",
        "ç´…ç™½è—è† è¢‹": "ç´…ç™½è—è† è¢‹",
        "å¤§è²å…¬": "å¤§è²å…¬",
        
        // Old items kept for compatibility
        "ä½å®¿": "ä½å®¿",
        "æš«ä½": "æš«ä½",
        "å®¿ä½": "å®¿ä½",
        "åº‡è­·ä¸­å¿ƒ": "åº‡è­·ä¸­å¿ƒ",
        "ä¼‘æ¯è™•": "ä¼‘æ¯è™•",
        "æ´—æ¾¡è¨­æ–½": "æ´—æ¾¡è¨­æ–½",
        "æ´—æ‰‹é–“": "æ´—æ‰‹é–“",
        "æ°´æ©Ÿ": "æ°´æ©Ÿ",
        "å»šæˆ¿": "å»šæˆ¿",
        "é£Ÿç‰©": "é£Ÿç‰©",
        "é£²å“": "é£²å“",
        "æ¨½è£æ°´": "æ¨½è£æ°´",
        "ä¹¾ç³§": "ä¹¾ç³§",
        "æ¯éºµ": "æ¯éºµ",
        "ç†±é£Ÿ": "ç†±é£Ÿ",
        "èƒ½é‡æ£’": "èƒ½é‡æ£’",
        "æ¹¯æ°´": "æ¹¯æ°´",
        "ç½é ­": "ç½é ­",
        "é¤å…·": "é¤å…·",
        "é£¯ç›’": "é£¯ç›’",
        "ç´™æ¯": "ç´™æ¯",
        "ä¿æš–ç‰©è³‡": "ä¿æš–ç‰©è³‡",
        "æ¯›å·¾": "æ¯›å·¾",
        "æ¯›æ°ˆ": "æ¯›æ°ˆ",
        "è¢«é‹ª": "è¢«é‹ª",
        "è¤¸": "è¤¸",
        "è¥ª": "è¥ª",
        "æš–åŒ…": "æš–åŒ…",
        "ç¡è¢‹": "ç¡è¢‹",
        "åœ°å¢Š": "åœ°å¢Š",
        "éœ²ç‡Ÿå¸³ç¯·": "éœ²ç‡Ÿå¸³ç¯·",
        "Heat tech": "Heat tech",
        "ç‰™åˆ·": "ç‰™åˆ·",
        "ç‰™è†": "ç‰™è†",
        "å£ç½©": "å£ç½©",
        "è±¬å’€": "è±¬å’€",
        "æ¿¾ç½": "æ¿¾ç½",
        "BBå°¿ç‰‡": "BBå°¿ç‰‡",
        "æˆäººå°¿ç‰‡": "æˆäººå°¿ç‰‡",
        "æ¸…æ½”ç”¨å“": "æ¸…æ½”ç”¨å“",
        "ç´™å·¾": "ç´™å·¾",
        "ä¸€æ¬¡æ€§å…§è¡£è¤²": "ä¸€æ¬¡æ€§å…§è¡£è¤²",
        "æ‹–éž‹": "æ‹–éž‹",
        "å…§è¡£è¤²": "å…§è¡£è¤²",
        "è¡›ç”Ÿç”¨å“": "è¡›ç”Ÿç”¨å“",
        "N95": "N95",
        "å‰é›»ç·š": "å‰é›»ç·š",
        "ç«ç‰›": "ç«ç‰›",
        "æ‹–æ¿": "æ‹–æ¿",
        "é›»æ± ": "é›»æ± ",
        "é›»ç­’": "é›»ç­’",
        "SIM Card": "SIM Card",
        "æ€¥æ•‘": "æ€¥æ•‘",
        "æ€¥æ•‘åŒ…": "æ€¥æ•‘åŒ…",
        "è¼ªæ¤…": "è¼ªæ¤…",
        "å¯µç‰©æ°§æ°£æ©Ÿ": "å¯µç‰©æ°§æ°£æ©Ÿ",
        "å¯µç‰©é£›æ©Ÿç± ": "å¯µç‰©é£›æ©Ÿç± ",
        "å¯µç‰©æš«æ‰˜å®¶åº­": "å¯µç‰©æš«æ‰˜å®¶åº­",
        "è²“ç³§": "è²“ç³§",
        "ç‹—ç³§": "ç‹—ç³§",
        "ç¸é†«æœå‹™": "ç¸é†«æœå‹™",
        "å¯µç‰©æ•‘æ´": "å¯µç‰©æ•‘æ´",
        "çœ‹é¡§é•·è€…": "çœ‹é¡§é•·è€…",
        "å…’ç«¥æš«è¨—": "å…’ç«¥æš«è¨—",
        "å¿ƒç†æ”¯æ´": "å¿ƒç†æ”¯æ´"
    }
};

type Language = 'en' | 'zh';

interface LanguageContextType {
    language: Language;
    setLanguage: (language: Language) => void;
    t: (key: keyof typeof translations.en) => string;
}

const LanguageContext = createContext<LanguageContextType | undefined>(undefined);

export const LanguageProvider = ({
    children
}: {
    children: ReactNode
}) => {
    const [language, setLanguage] = useState<Language>(() => {
        try {
            const saved = typeof window !== 'undefined' && localStorage.getItem('language');
            return (saved as Language) || 'zh';
        } catch (err) {
            return 'zh';
        }
    });

    const t = (key: keyof typeof translations.en) => {
        // Safe access across both languages â€“ fall back to English if key is missing in selected language
        return ((translations as any)[language] as Record<string, string>)[key] || translations.en[key as keyof typeof translations.en];
    };

    const setLang = (lang: Language) => {
        setLanguage(lang);
        try {
            if (typeof window !== 'undefined') {
                localStorage.setItem('language', lang);
            }
        } catch (err) {
            // ignore localStorage errors
        }
        try {
            if (typeof window !== 'undefined') {
                window.dispatchEvent(new CustomEvent('languageChanged', { detail: lang }));
            }
        } catch (err) {
            // ignore
        }
    };

    React.useEffect(() => {
        if (typeof window === 'undefined') return;
        const handler = (ev: any) => {
            const lang = ev?.detail;
            if (lang && (lang === 'en' || lang === 'zh')) {
                setLang(lang);
            }
        };
        window.addEventListener('languageChanged', handler);
        return () => window.removeEventListener('languageChanged', handler);
    }, []);

    return (
        <LanguageContext.Provider value={{
            language,
            setLanguage: setLang,
            t
        }}>
            {children}
        </LanguageContext.Provider>
    );
};

export const useLanguage = () => {
    const context = useContext(LanguageContext);
    if (context === undefined) {
        throw new Error('useLanguage must be used within a LanguageProvider');
    }
    return context;
};

// Listen for user-driven language defaults (from AuthContext)
if (typeof window !== 'undefined') {
    window.addEventListener('userPrefersLanguage', (ev: any) => {
        const lang = ev?.detail;
        if (lang && (lang === 'en' || lang === 'zh')) {
            // set and persist the language for the app
            try { localStorage.setItem('language', lang); } catch {}
            const event = new CustomEvent('languageChanged', { detail: lang });
            window.dispatchEvent(event);
        }
    });
}
